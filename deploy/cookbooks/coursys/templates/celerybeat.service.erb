# adapted from https://docs.celeryproject.org/en/latest/userguide/daemonizing.html#usage-systemd
[Unit]
Description=CourSys celery beat
After=network.target

[Service]
Type=simple
User=<%= @username %>
Group=<%= @username %>
EnvironmentFile=<%= @data_root %>/config/celery-environment
WorkingDirectory=<%= @coursys_dir %>
ExecStart=/bin/sh -c '${CELERY_BIN} beat  \
  -A ${CELERY_APP} --pidfile=${CELERYBEAT_PID_FILE} \
  --logfile=${CELERYBEAT_LOG_FILE} --loglevel=${CELERYD_LOG_LEVEL}'

[Install]
WantedBy=multi-user.target